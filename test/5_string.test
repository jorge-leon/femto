#!./test # -*- mode: sh -*-
# test executable and fLisp functionality
# leg20231128: Femto


export FLISPRC=../flisp.rc

tap 27

stringlib() { IN="(require 'string) $IN" flisp_expr "$@"; }
stringlib_err() { IN="(require 'string) $IN" flisp_err "$@"; }

IN='(string-trim-front "")' OUT='""'
stringlib 1; ok string-trim-front-1 emtpy string is itself

IN='(string-trim-front "abc ")' OUT='"abc "'
stringlib 1; ok string-trim-front-2 string is itself

IN='(string-trim-front " abc ")' OUT='"abc "'
stringlib 1; ok string-trim-front-3  single space prefixed string is trimmed

IN='(string-trim-front "   abc ")' OUT='"abc "'
stringlib 1; ok string-trim-front-4  triple space prefixed string is trimmed


IN='(string-trim-back "")' OUT='""'
stringlib 1; ok string-trim-back-1 emtpy string is itself

IN='(string-trim-back " abc")' OUT='" abc"'
stringlib 1; ok string-trim-back-2 string is itself

IN='(string-trim-back " abc ")' OUT='" abc"'
stringlib 1; ok string-trim-back-3  single space postfixed string is trimmed

IN='(string-trim-back " abc   ")' OUT='" abc"'
stringlib 1; ok string-trim-back-4  triple space postfixed string is trimmed


IN='(string-trim "")' OUT='""'
stringlib 1; ok string-trim-1 emtpy string is itself

IN='(string-trim "abc")' OUT='"abc"'
stringlib 1; ok string-trim-2 string is itself

IN='(string-trim "  abc  ")' OUT='"abc"'
stringlib 1; ok string-trim-3 string with spaces is trimmed

IN='(string-ref "abcde" 0)' OUT='"a"'
stringlib 1; ok string-ref-1 index 0 is a

IN='(string-ref "abcde" 2)' OUT='"c"'
stringlib 1; ok string-ref-2 index 2 is c

IN='(string-ref "abcde" 4)' OUT='"e"'
stringlib 1; ok string-ref-3 index 4 is e

IN='(string-ref "" 0)' OUT='""'
stringlib 1; ok string-ref-4 emtpy string 0 is empty string


IN='(string-startswith "" "abcde")' OUT='nil'
stringlib 1; ok string-startswith-1 emtpy string starts with string is nil

IN='(string-startswith "abcde" "")' OUT='t'
stringlib 1; ok string-startswith-2 string starts with empty string is t

IN='(string-startswith "abcde" "ab")' OUT='t'
stringlib 1; ok string-startswith-3 string starts with start string is t

IN='(string-startswith "abcde" "cd")' OUT='nil'
stringlib 1; ok string-startswith-4 string starts not with start string is nil


IN='(string-shrink-right "")' OUT='""'
stringlib 1; ok string-shrink-right-1 drop from empty string is empty string

IN='(string-shrink-right "abcde")' OUT='"bcde"'
stringlib 1; ok string-shrink-right-2 drop from string is on char less

IN='(string-shrink-left "")' OUT='""'
stringlib 1; ok string-string-shrink-left-1 string-shrink-left from empty string is empty string

IN='(string-shrink-left "abcde")' OUT='"abcd"'
stringlib 1; ok string-string-shrink-left-2 string-shrink-left from string is on char less

false; ok string-first-char \# TODO
false; ok string-last-char \# TODO
false; ok string-empty-p \# TODO
false; ok string-split \# TODO
